---
title: 设计模式——建造者模式
description: 详细介绍建造者模式的概念、优缺点及C++实现方式
pubDate: 2025-12-06
image: "/image/builder-pattern.jpg"
categories:
  - 设计模式
tags:
  - 建造者模式
  - C++
  - 设计模式
---

# 设计模式——建造者模式

## 一、基本概念

### 1. 定义

> 

### 2. 优缺点

**优点**：

- 

**缺点**：

- 

### 3. 结构

- 



## 二、代码实现

### 产品角色

产品角色包含多个组成部件的复杂对象：

```cpp
#include <iostream>
#include <string>

class House {
private:
    std::string foundation;
    std::string structure;
    std::string roof;
    std::string interior;

public:
    void setFoundation(const std::string& f) { foundation = f; }
    void setStructure(const std::string& s) { structure = s; }
    void setRoof(const std::string& r) { roof = r; }
    void setInterior(const std::string& i) { interior = i; }

    void show() const {
        std::cout << "House built with:" << std::endl;
        std::cout << "- Foundation: " << foundation << std::endl;
        std::cout << "- Structure: " << structure << std::endl;
        std::cout << "- Roof: " << roof << std::endl;
        std::cout << "- Interior: " << interior << std::endl;
    }
};
```

### 抽象建造者

抽象建造者包含创建产品各个子部件的抽象方法：

```cpp
class HouseBuilder {
public:
    virtual ~HouseBuilder() = default;
    virtual void buildFoundation() = 0;
    virtual void buildStructure() = 0;
    virtual void buildRoof() = 0;
    virtual void buildInterior() = 0;
    virtual House* getHouse() = 0;
};
```

### 具体建造者

具体建造者实现了抽象建造者接口：

```cpp
class ConcreteHouseBuilder : public HouseBuilder {
private:
    House* house;

public:
    ConcreteHouseBuilder() { house = new House(); }

    void buildFoundation() override {
        house->setFoundation("Concrete Foundation");
    }

    void buildStructure() override {
        house->setStructure("Wooden Frame Structure");
    }

    void buildRoof() override {
        house->setRoof("Tile Roof");
    }

    void buildInterior() override {
        house->setInterior("Modern Interior");
    }

    House* getHouse() override {
        House* temp = house;
        house = new House();  // Prepare for next construction
        return temp;
    }
};
```

### 指挥者

指挥者会调用建造者中的方法完成复杂对象的创建：

```cpp
class ConstructionEngineer {
private:
    HouseBuilder* builder;

public:
    explicit ConstructionEngineer(HouseBuilder* b) : builder(b) {}

    void constructHouse() {
        builder->buildFoundation();
        builder->buildStructure();
        builder->buildRoof();
        builder->buildInterior();
    }

    House* getHouse() {
        return builder->getHouse();
    }
};
```

### 客户类

```cpp
int main() {
    ConcreteHouseBuilder builder;
    ConstructionEngineer engineer(&builder);

    engineer.constructHouse();
    House* house = engineer.getHouse();
    house->show();

    delete house;
    return 0;
}
```

运行结果：

```
House built with:
- Foundation: Concrete Foundation
- Structure: Wooden Frame Structure
- Roof: Tile Roof
- Interior: Modern Interior
```

***

> 参考：
>
> - [菜鸟教程](https://www.runoob.com/design-pattern/singleton-pattern.html)
> - [C语言网](http://c.biancheng.net/view/1338.html)
> - [Refactoring.Guru](https://refactoringguru.cn/)