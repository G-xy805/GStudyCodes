---
import { Icon } from "astro-icon/components";
import ImageWrapper from "@/components/misc/ImageWrapper.astro";
import { profileConfig } from "@/config/profileConfig";
import { url } from "@/utils/url-utils";
---

<div class="card-base p-3 relative overflow-hidden group">
  <!-- 装饰元素 -->
  <div class="absolute -top-16 -right-16 w-32 h-32 bg-gradient-to-bl from-[var(--primary)]/10 to-[var(--accent)]/10 rounded-full blur-2xl pointer-events-none transition-transform duration-500 group-hover:scale-110"></div>
  <div class="absolute -bottom-16 -left-16 w-32 h-32 bg-gradient-to-tr from-[var(--secondary)]/10 to-[var(--tertiary)]/10 rounded-full blur-2xl pointer-events-none transition-transform duration-500 group-hover:scale-110"></div>
  
  <a
    aria-label="Go to About Page"
    href={url("/about/")}
    class="group/avatar block relative mx-auto mt-1 lg:mx-0 lg:mt-0 mb-3
       max-w-[12rem] lg:max-w-none overflow-hidden rounded-xl active:scale-95"
  >
    <div class="absolute inset-0 bg-gradient-to-r from-[var(--primary)]/20 to-[var(--secondary)]/20 opacity-0 group-hover/avatar:opacity-100 transition-opacity duration-300 z-20 rounded-xl"></div>
    <div
      class="absolute transition pointer-events-none group-hover/avatar:bg-black/40 group-active:bg-black/60
        w-full h-full z-30 flex items-center justify-center rounded-xl"
    >
      <Icon
        name="feather:user"
        class="transition opacity-0 scale-90 group-hover/avatar:scale-100 group-hover/avatar:opacity-100 text-white text-5xl drop-shadow-lg"
      />
    </div>
    <div class="absolute inset-0 rounded-xl border-2 border-transparent group-hover/avatar:border-[var(--primary)]/30 transition-all duration-300 z-20"></div>
    <ImageWrapper
      src={profileConfig.avatar || ""}
      alt="Profile Image of the Author"
      class="mx-auto lg:w-full h-full lg:mt-0 transition-transform duration-300 group-hover/avatar:scale-110 rounded-xl"
      showFilter={false}
    />
  </a>
  
  <div class="px-2 relative z-10">
    <div class="font-bold text-xl text-center mb-1 dark:text-neutral-50 transition relative inline-block w-full">
      <span class="relative z-10 group-hover:text-[var(--primary)] transition-colors duration-300">{profileConfig.name}</span>
    </div>
    
    <div class="h-1 w-12 bg-gradient-to-r from-[var(--primary)] via-[var(--secondary)] to-[var(--accent)] mx-auto rounded-full mb-2 transition-all duration-300 group-hover:w-16"></div>
    
    <div class="text-center mb-2.5 transition font-bold tracking-wide bg-gradient-to-r from-pink-400 via-purple-400 to-indigo-400 bg-clip-text text-transparent hover:scale-105 hover:from-purple-400 hover:to-pink-400 cursor-default">
      {profileConfig.bio}
    </div>
    
    <div class="mt-4 pt-3 border-t border-neutral-300/50 dark:border-neutral-600/50 relative">
      <!-- 装饰线渐变 -->
      <div class="absolute top-0 left-1/2 -translate-x-1/2 w-20 h-0.5 bg-gradient-to-r from-transparent via-[var(--primary)] to-transparent opacity-50"></div>
      
      <div class="grid grid-cols-4 gap-2 justify-items-center">
        {
          profileConfig.links.map((item) => {
            // 判断是否为站内链接
            const isInternal = item.url.startsWith('/');
            return (
              <div class="relative group/social">
                <div class="absolute -inset-1 bg-gradient-to-r from-[var(--primary)] to-[var(--secondary)] rounded-full opacity-0 group-hover/social:opacity-20 transition-opacity duration-300 blur-sm"></div>
                <a
                  rel={isInternal ? undefined : "me"}
                  aria-label={item.name}
                  href={item.url}
                  target={isInternal ? undefined : "_blank"}
                  class="relative bg-transparent w-10 h-10 flex items-center justify-center rounded-full hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-all duration-300 hover:scale-110 group-hover/social:text-[var(--primary)]"
                >
                  <Icon name={item.icon} class="text-xl text-neutral-600 dark:text-white hover:text-neutral-900 dark:hover:text-white transition-all duration-300" />
                </a>
                <span class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white dark:text-black bg-[var(--primary)] rounded opacity-0 invisible group-hover/social:opacity-100 group-hover/social:visible transition-all duration-200 whitespace-nowrap z-50">
                  {item.name}
                </span>
              </div>
            );
          })
        }
      </div>
    </div>
  </div>
</div>
